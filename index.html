---
title: Example site
layout: default
---

<p>Example site for exploring <a href="https://github.com/jekyll/jekyll/issues/7811">Jekyll issue #7811</a></p>

<p><a href="/news/browse.html">This page (/news/browse.html)</a> should list the months that have news items. In this example it should just list December 2019 and January 2020 in a bulleted list. These items should then link through to the month listings for <a href="/news/122019.html">December 2019</a> and <a href="/news/012020.html">January 2020</a>.</p>

<p>The /news/browse.html page and the two <em>month</em> pages (/news/122019.html and /news/012020.html) are generated by a custom plugin: <code>plugins/news-month-listings.rb</code>.</p>

<p><strong>However,</strong> the /news/browse.html page is created using an incorrect _layout by the <code>news-month-listings.rb</code> custom plugin. Instead of using <code>_layouts/news_browse.html</code> as specified in the custom plugin it's using <code>_layouts/news_by_month.html</code>.</p>

<p>If you edit the Gem as suggested in <a href="https://github.com/jekyll/jekyll/issues/7811#issuecomment-529332037">this comment in #7811</a> then the pages all use the correct _layouts.</p>

<h2>Brief explanation of plugins/news-month-listings.rb</h2>

<p>The code loops over the posts with the tag 'news' (the site on which I plan to use this will have _posts in more than one directory so I use the autogenerated tag based on parent folder) and works out what month/year combinations have posts (using functions based on similar ones in '<a href="https://github.com/jekyll/jekyll-archives/blob/master/lib/jekyll-archives.rb">jekyll-archives</a>' plugin). Posts for a specific 'month/year' combination are then stored in a hash.</p>

<p>I then loop over a list of these month/year combinations and generate a page that for each one lists all the posts that were published that month. These pages use the Class NewsItemPage and the layout 'news_by_month.html'. Each page is stored in an news_pages list. During this I create a hash with each month/year combination as the key and a nicely formatted version as the value.</p>

<p>After that I use the hash of nicely formatted dates to create a page listing the months that had a news item. I create a single instance of NewsListingsPage which <strong>SHOULD</strong> use the layout 'news_browse.html'.</p>

<p>I then concatenate the generated pages back into site.pages.</p>
